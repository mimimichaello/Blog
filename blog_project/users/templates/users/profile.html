{% extends "blog_app/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
<section class="vh-100" style="background-color: #9de2ff; display: flex; justify-content: flex-start; align-items: flex-start;">
    <div class="container py-5">
        <div class="row">
            <div class="col-md-4">
                <div class="card" style="border-radius: 15px;">
                    <div class="card-body p-4">
                        <div class="d-flex text-black">
                            <div class="flex-shrink-0">
                                {% if user.profile.image %}
                                <img src="{{ user.profile.image.url }}" alt="Profile Image" class="img-fluid" style="width: 180px; border-radius: 10px; margin-left: -10px">
                                {% else %}
                                <img src="{% static 'img/default.jpg' %} " alt="Default Image" class="img-fluid" style="width: 180px; border-radius: 10px;">
                                {% endif %}
                            </div>
                            <div class="flex-grow-1 ms-0.1">
                                <h5 class="mb-1" style="word-wrap: break-word;">{{ user.username }}</h5>
                                <p class="mb-2 pb-1" style="color: #2b2a2a; overflow-wrap: break-word;">{{ user.email }}</p>
                                <div class="d-flex justify-content-start rounded-3 p-2 w-100"
                                    style="background-color: #efefef;">
                                    <div class="d-flex justify-content-start rounded-3 p-2 mb-2 bg-light w-100">
                                        <div>
                                            <p class="small text-muted mb-1">К-во статей:</p>
                                            <p class="mb-0 text-nowrap" style="word-wrap: break-word;">{{ user_posts_count }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card" style="border-radius: 15px;">
                    <div class="card-body p-4">
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <fieldset class="form-group">
                                <legend class="border-bottom mb-4">Ваш профиль</legend>
                                <div class="row">
                                    <div class="col-md-6">
                                        {{ u_form|crispy }}
                                    </div>
                                    <div class="col-md-6">
                                        {{ p_form|crispy }}
                                    </div>
                                </div>
                            </fieldset>
                            <div class="form-group">
                                <button class="btn btn-outline-info" type="submit">Обновить</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}
